<% include ../partials/head.ejs %>

<div id="app" class="fluid-container">
	
	<div class="row">
		<div class="col-12 header-links">
			<div class="header-link">
				<a href="https://enzo-customers.herokuapp.com/public">Home</a>
			</div>
			<div class="header-link">
				<a href="https://enzo-customers.herokuapp.com/public/customers/create">Create</a>
			</div>
			<div class="header-link">
				<form @submit.prevent="submit" class="form-inline">
					<input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search" v-model="search">
					<button class="btn btn-outline-primary my-2 my-sm-0" type="submit">Search</button>
				</form>
			</div>
		</div>
	</div>
		<template v-if="customers.length > 0">
			<div id="customers">
				<v-client-table :data="customers" :columns="columns" :options="options">
					<a slot="last_order_name" slot-scope="props" target="_blank" :href="'https://enzo-custom.myshopify.com/admin/orders/'+ props.row.last_order_id">%% props.row.last_order_name %%</a>
					<a slot="id" slot-scope="props" target="" :href="'/public/customers/'+ props.row.id">Edit</a>
				</v-client-table>
			</div>
		</template>
	
		<template v-else>
			<div id="customers">
				
			</div>
		</template>
	<div class="row">
		<div class="col-12">
			<template v-if="noResults == true">
				<div class="bg-white p-4">
					<h4>No matching results were found.</h4>
				</div>
			</template>
		</div>
	</div>
	</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js"></script>
<script src="<%= server %>/js/portal.js"></script>
<script>initHome()</script>
